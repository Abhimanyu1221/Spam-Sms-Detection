<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spam Detection Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f4f4f4;
            margin: 0;
        }

        .navbar {
            background-color: #cdd2d6;
            border-bottom: 1px solid #e7e7e7;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .navbar-nav {
            list-style-type: none;
            display: flex;
            gap: 20px;
            margin: 0;
            padding: 0;
        }

        .navbar-nav a {
            text-decoration: none;
            padding: 8px 16px;
            color: #01060b;
            transition: background-color 0.2s, color 0.2s;
        }

        .navbar-nav a:hover,
        .navbar-nav a.active {
            background-color: #488ed4;
            color: white;
            border-radius: 4px;
        }

        .container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 50px;
        }

        .stage {
            display: inline-block;
            padding: 20px;
            border-radius: 10px;
            background: white;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 1s ease-in-out, opacity 1s ease-in-out;
        }

        .stage img {
            width: 100px;
            height: 100px;
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }

        .arrow {
            font-size: 24px;
            margin: 0 10px;
        }

        button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
        }

        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar">
        <ul class="navbar-nav">
            <li><a href="/" class="nav-link">Home</a></li>
            <li><a href="/check" class="nav-link">Check</a></li>
            <li><a href="/process" class="nav-link">Process</a></li>
        </ul>
    </nav>

    <h1>Spam Detection Process</h1>

    <div class="container">
        <div class="stage">
            <img src="{{ url_for('static', filename='input_message.png') }}" alt="Input Message">
            <p>1. Message Received</p>
        </div>
        <div class="arrow">➡</div>
        <div class="stage">
            <img src="{{ url_for('static', filename='preprocessing.jpg') }}" alt="Preprocessing">
            <p>2. Preprocessing</p>
        </div>
        <div class="arrow">➡</div>
        <div class="stage">
            <img src="{{ url_for('static', filename='feature_extraction.png') }}" alt="Feature Extraction">
            <p>3. Feature Extraction</p>
        </div>
        <div class="arrow">➡</div>
        <div class="stage">
            <img src="{{ url_for('static', filename='classification.png') }}" alt="Classification">
            <p>4. Classification</p>
        </div>
        <div class="arrow">➡</div>
        <div class="stage">
            <img src="{{ url_for('static', filename='que.jpg') }}" alt="Spam Detected" id="output-image">
            <p id="output-text">5. Result</p>
        </div>
    </div>

    <div class="container">
        <div class="stage">
            <img src="{{ url_for('static', filename='12.jpg') }}" alt="Input Message">
            <p>1. Message Received</p>
        </div>
        <div class="arrow">➡</div>
        <div class="stage">
            <img src="{{ url_for('static', filename='11.jpg') }}" alt="Preprocessing">
            <p>2. Preprocessing</p>
        </div>
        <div class="arrow">➡</div>
        <div class="stage">
            <img src="{{ url_for('static', filename='13.jpg') }}" alt="Feature Extraction">
            <p>3. Feature Extraction</p>
        </div>
        <div class="arrow">➡</div>
        <div class="stage">
            <img src="{{ url_for('static', filename='14.jpg') }}" alt="Classification">
            <p>4. Classification</p>
        </div>
        <div class="arrow">➡</div>
        <div class="stage">
            <img src="{{ url_for('static', filename='15.jpg') }}" alt="Spam Detected" id="output-image">
            <p id="output-text">5. Result</p>
        </div>
    </div>

    <button onclick="startAnimation()">Start Process</button>

    <script>
        function startAnimation() {
    let allContainers = document.querySelectorAll(".container");
    let firstStages = allContainers[0].querySelectorAll(".stage");
    let secondStages = allContainers[1].querySelectorAll(".stage");

    let outputImage1 = firstStages[firstStages.length - 1].querySelector("img");
    let outputImage2 = secondStages[secondStages.length - 1].querySelector("img");

    let delay = 1000;
    let stageGap = 500;
    let animationGap = 600; // Slightly increased for a smoother effect
    let scaleDuration = 700; // Adjusting timing for better transition

    function animateStages(stages, outputImage, resultImage, isLastImageChange, callback) {
        function animateStage(index) {
            if (index >= stages.length) {
                setTimeout(() => {
                    if (isLastImageChange) {
                        let isSpam = Math.random() > 0.5;
                        outputImage.src = isSpam ? resultImage.spam : resultImage.notSpam;
                    }
                    callback();
                }, delay);
                return;
            }

            // Smoothly scale up
            stages[index].style.transition = `transform ${scaleDuration}ms ease-in-out, opacity ${scaleDuration}ms ease-in-out`;
            stages[index].style.transform = "scale(1.5)";
            stages[index].style.opacity = "1";

            setTimeout(() => {
                // Smoothly scale back to original
                stages[index].style.transition = `transform ${scaleDuration}ms ease-in-out, opacity ${scaleDuration}ms ease-in-out`;
                stages[index].style.transform = "scale(1)";
                stages[index].style.opacity = "0.5";

                setTimeout(() => {
                    animateStage(index + 1);
                }, animationGap);
            }, delay);
        }

        animateStage(0);
    }

    let firstResultImages = {
        spam: "static/spam_detected.jpg",
        notSpam: "static/not_spam.png"
    };

    let secondResultImages = {
        spam: "static/15.jpg",
        notSpam: "static/15.jpg"
    };

    animateStages(firstStages, outputImage1, firstResultImages, true, () => {
        setTimeout(() => {
            animateStages(secondStages, outputImage2, secondResultImages, false, () => {
                console.log("Both animations completed!");
            });
        }, stageGap);
    });
}
    </script>
</body>

</html>

	
